<html>

<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>Hamster Mansion's Graph</title>
    <!-- <link rel="stylesheet" href="./index.css"> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>

	<link rel="stylesheet" href="css/index.css">
	<script type="text/javascript">
	window.onload = function () {
		
		//initial value of dataPoints 
		var dps = [
		{label: "", y: 206},
		{label: "", y: 163},
		{label: "", y: 154},
		{label: "", y: 176},
		{label: "", y: 184},
		{label: "", y: 122}
		];	

		var chart = new CanvasJS.Chart("chartContainer",{			
			title: {
				text: "Food that hamster ate"		
			},
			axisY: {				
				suffix: " "
			},		
			legend :{
				verticalAlign: 'bottom',
				horizontalAlign: "center"
			},
			data: [
			{
				type: "column",				
				indexLabel: "{y} ",
				dataPoints: dps					
			}
			]
		});

		
		var updateInterval = 1000;	
		

		var updateChart = function () {

				
				// generating random variation deltaY
				var yVal = Math.round(100*Math.random());
				var boilerColor;


				// color of dataPoint dependent upon y value. 

				boilerColor =
				yVal > 200 ? "#FF2500":
				yVal >= 170 ? "#FF6000":
				yVal < 170 ? "#6B8E23 ":							
				null;


				// updating the dataPoint
				if(dps.length >= 30){
					console.log(dps.shift())
					for(let i=0;i<dps.length;i++){
						dps[i].x = i;
					}

				}
				dps.push( {label: "" , y: yVal, color: boilerColor});

				//console.log(dps)
			chart.render();
		};
		
		updateChart();		

		// update chart after specified interval 
		setInterval(function(){updateChart()}, updateInterval);


	}
	</script>
	<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</head>
<body>
	<div id="header" class="row container-fluid">
        <h1>HAMSTER MANSION</h1>
    </div>
    <div id="tab" class="row">
        <ul id="fast">
            <li class="col-md-1 col-md-offset-4"><a href="index.html">STATUS</a></li>
            <li class="col-md-1 col-md-offset-1"><a href="graph.html">STATISTICS</a></li>
        </ul>
    </div>
	<div id="chartContainer" class="col-md-oofset-1" style="height: 50%; width: 80%;">
	</div>
</body>
</html>